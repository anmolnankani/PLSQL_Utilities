CREATE TABLE audit_log (
  log_id NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  table_name VARCHAR2(100),
  action VARCHAR2(10),
  changed_by VARCHAR2(100),
  changed_at DATE DEFAULT SYSDATE
);

CREATE OR REPLACE TRIGGER trg_audit_example
AFTER INSERT OR UPDATE OR DELETE ON products
FOR EACH ROW
BEGIN
  INSERT INTO audit_log(table_name, action, changed_by) 
  VALUES('PRODUCTS', CASE WHEN INSERTING THEN 'INSERT' WHEN UPDATING THEN 'UPDATE' WHEN DELETING THEN 'DELETE' END, USER);
END;
/
